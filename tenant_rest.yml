---
- name: Tenant configuration with rest call
  hosts: apic
  connection: local
  gather_facts: no

  tasks:
  - name: Add a tenant using a JSON string
    aci_rest:
      hostname: "{{ inventory_hostname }}"
      username: "{{ new_user }}"
      #password: "{{ password }}"
      private_key: "{{ new_user }}.key"
      validate_certs: no
      path: /api/mo/uni.json
      method: post
      content: 
        {
          "fvTenant": {
            "attributes": {
              "name": "ACI-ACC-Tenant-REST-API",
              "dn": "uni/tn-ACI-ACC-Tenant-REST-API",
              "descr": "Tenant configured with Ansible and ACI REST API"
            }
          }
        }
    delegate_to: localhost